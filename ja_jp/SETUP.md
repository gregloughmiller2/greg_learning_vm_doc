{% include '/version.md' %}

# Learning VMのセットアップ

## VMを入手する

まだ入手していない場合は、[Learning VMをダウンロード](https://puppet.com/download-learning-vm)してください。

## 仮想化セットアップ

どの仮想化ソフトウェアを使用する場合でも、最新バージョンを入手してください。[VirtualBox](https://www.virtualbox.org/wiki/Downloads)では、Linux、Mac、Windowsで利用可能な無償のソフトウェアです。また、VMwareは、Mac用の[VMware Fusion](https://www.vmware.com/products/fusion/)やWindows用の[VMware Workstation](https://www.vmware.com/products/workstation/)など、いくつかのデスクトップ仮想化アプリケーションを提供しています。

Learning VMのOVAファイルは、直接開くのではなく、*インポート*する必要があります。仮想化ソフトウェアを起動し、**File**メニューの**Import**または**Import Appliance**オプションを探してください。**Import**オプションが見つからない場合は、仮想化ソフトウェアのドキュメントを参照してください。

ホストマシンに十分なメモリがある場合は、VMのメモリ割り当てをデフォルトの3GBから4GBに増やすと、パフォーマンスと安定性が向上する可能性があります。メモリ割り当て設定は、VirtualBox ManagerウィンドウでVMを選択し、*Settings*ダイアログを開き、*System*セクションを選択すると見つかります。

## ネットワークの設定

クエストガイドを完了するのに必要なすべてのパッケージとモジュールは、VMによりローカルにホストされますが、ホストシステムからVMにアクセスするためのネットワークを設定する必要があります。

仮想化ソフトウェアでは、いくつかのネットワーク設定オプションが提供されています。プロキシまたは制限的なファイアウォールルールが存在する可能性のあるネットワークを使用している場合は(不明な場合はネットワーク管理者に問い合わせてください)、オフラインのホストのみのネットワークでVMを実行することを強く推奨します。VirtualBoxソフトウェアを使用している場合、オフライン設定で複雑な初期設定を行う必要がありますが、これによりオンライン設定で生じる可能性のあるネットワークの問題を回避することができます。

プロキシや制限的なファイアウォールルールのないネットワークでVirtualBoxを使用している場合は、以下のオンライン設定セクションで説明するブリッジアダプタを使用するほうが簡単かもしれません。

### オフライン

**VirtualBox**の設定:

VirtualBoxでホストのみのネットワークを使うには、VirtualBoxの*preferences*から新規ネットワークを作成し、設定する必要があります。一部のシステムでは、これは*settings*と呼ばれることもあります。特定のVMの設定ではなく、VirtualBoxそのものの環境設定であることを確認してください。

VirtualBoxの環境設定パネルを開き、**network**セクション、**Host-only Networks**の順に選択します。新規ネットワークを作成したら、ダイアログの横にあるスクリュードライバーのアイコンをクリックし、ネットワーク設定を編集します。**Adapter**セクションで、以下の設定を入力します。

**IPv4 Address: 192.168.56.1**  
**IPv4 Network Mask: 255.255.255.0**  

**DHCP Server**セクションで、以下の設定を入力します。

**Enable Server**ボックスにチェックを入れる 
**Server Address: 192.168.56.1**  
**Server Mask: 255.255.255.0**  
**Lower Address Bound: 192.168.56.110**  
**Upper Address Bound: 192.168.56.200**  

**OK**をクリックしてアダプタ設定の変更を適用し、環境設定ダイアログを閉じます。VirtualBox Managerウィンドウから、Learning VMの設定セクションを開きます。**Network**セクションへ移動してドロップダウンメニューから**Host-only Adapter**を選択し、**Name:**ドロップダウンメニューから作成したホストのみのアダプタの名前を選択します。**OK**をクリックして設定の変更を適用します。

**VMWare**の設定:  

Learning VMの**Settings**ダイアログを開き、**Network**セクションを選択します。**Custom**ヘッディングで、プライベートネットワークアダプタオプションを選択します。

### オンライン

インターネットにアクセスしながらLearning VMを実行する場合は、*Network Adapter*を*Bridged*に設定します。可能な場合は*Autodetect*設定を使うか、デフォルトのネットワークアダプタ名を適用します(この変更を行う前にVMを起動した場合は、設定を適切に適用するために、VMの再起動が必要になることもあります)。

Puppetモジュールツール、yum、RubyGemsはローカルなリポジトリを使用する設定になっているため、そうしたツールでリモートコンテンツにアクセスするは、手動で設定を変更する必要があります。この問題については調査を働きかけていますが、現時点では、クエストガイドの範囲を越えて対応することはできません。

## ログイン

VMを起動します。直接ログインするのではなく、ブラウザベースのWeb端末またはSSHを使うことを推奨します。

Web端末にアクセスするには、Webブラウザを開き、`http://<VM's IP ADDRESS>:9091`に移動します。スプラッシュページに表示される指示に従ってログインします。

Macでは、デフォルトのTerminalアプリケーションまたはiTermなどのサードパーティのアプリケーションを使用できます。Windowsでは、無料のSSHクライアント[PuTTY](http://www.putty.org/)を推奨します。VMコンソールのスプラッシュページで提供される認証情報を用いて認証します。

## はじめましょう

VMをセットアップして接続したら、クエストガイドの双方向レッスンを始めることができます。ホストシステムでWebブラウザを開き、アドレスバーにLearning VMのIPアドレス`http://<IP-ADDRESS>`を入力して、クエストガイドにアクセスします(`http`を使う点に注意してください。`https`と入力すると、PEコンソールインターフェースに接続します)。
